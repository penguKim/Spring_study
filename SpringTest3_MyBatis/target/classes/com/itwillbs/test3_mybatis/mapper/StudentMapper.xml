<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
마이바티스에서 실행할 SQL 구문을 갖는 xxxMapper.xml 파일 정의
=> 실행할 각 구문의 이름을 태그로 제공함(insert, update, delete, select 등)
   (내부적으로 PreparedStatement 객체를 통해 SQL 구문을 실행함)
=> 주의! mapper 태그 내의 namespace 속성에 현재 XML 파일과 연결될 자바 인터페이스를 명시해야한다!
   ex) <mapper namespace="패키지명.인터페이스명">
   (존재하지 않는 인터페이스(오타 등)라도 오류가 표시되지 않음)
=> 주의! 각 태그 내의 id 속성에 지정될 이름은 Mapper 인터페이스 내의 메서드명과 일치해야한다!
 -->

<!-- 실제 구문 실행 시 매퍼 패키지의 인터페이스가 없다면(이름이 틀릴 경우 포함) 오류가 발생한다. -->
<mapper namespace="com.itwillbs.test3_mybatis.mapper.StudentMapper">

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<insert id="insertStudent">
		INSERT INTO student
		VALUES (
			null     -- AUTO_INCREMENT 컬럼이므로 null 값 전달 시 자동 증가
			, #{name} -- student.name 대신 name(변수명)만 지정
			, #{email} -- student.email 대신 email(변수명)만 지정
			, #{grade} -- student.grade 대신 grade(변수명)만 지정
		)
	</insert>
	
	<!-- 학생 상세정보 조회 - SELECT -->
	<!-- 마이바티스 xml파일 탭에서 속성 설명 보기 -->
	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<select id="selectStudent" resultType="com.itwillbs.test3_mybatis.vo.StudentVO">
		SELECT *
		FROM student
		WHERE idx = #{idx}
	</select>
	
	<!-- 학생 목록 조회 - SELECT -->
	<!-- 조회 결과를 StudentVO 타입 복수개의 객체로 ~~~~~~~~~~~~~~ -->
	<select id="selectStudentList" resultType="com.itwillbs.test3_mybatis.vo.StudentVO">
		SELECT * FROM student
	</select>
	
	<!-- 학생 목록 수정 - UPDATE -->
	<!--  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<update id="updateStudent">
		UPDATE student
		SET name = #{name}
			, email = #{email}
			, grade = #{grade}
		WHERE idx = #{idx}
	</update>
	
	<!-- 학생 정보 삭제 - DELETE -->
	<delete id="deleteStudent">
		DELETE FROM student
		WHERE name = #{name}
		AND email = #{email}
	</delete>
	
	
</mapper>












